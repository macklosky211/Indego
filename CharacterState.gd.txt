Extends CharacterBody3D
class_name CharacterState

## This is the most important part of this entire system, setting this changes our current state.
static var current_state : CharacterState = CharacterIdleState :
	set(value):
		if current_state.has_method("exit"):
			current_state.exit()
		current_state = value
		if current_state.has_method("enter"):
			current_state.enter()

## This variable allows the character to be frozen. 
static var should_move_and_slide : bool = true

## This variable should trigger a animation_FSM to play the crouch animation.
static var character_is_crouched : bool = false

func _physics_process() -> void:
	current_state.update()
	if should_move_and_slide: move_and_slide()

## This function is called every physics update for the active state.
func _update() -> void:
	pass

## This function is called when entering a state.
func _enter() -> void:
	pass

## This function is called when exiting a state.
func _exit() -> void:
	pass

## This function is for debugging which state the player is currently in.
func _get_state_name() -> String:
	return "Template_State"

## Returns a vector2 representing which direction the player wishes to travel in.
func input_vector() -> Vector2:
	return Input.get_vector("Left", "Right", "Up", "Down")

##
func is_holding_sprint() -> bool:
	return Input.is_action_pressed("Sprint_Modifier")

func is_holding_crouch() -> bool:
	return Input.is_action_pressed("Crouch_Modifier")

func is_holding_jump() -> bool:
	return Input.is_action_pressed("Jump")

